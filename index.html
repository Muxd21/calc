<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المالية الذكية - حاسبة القروض والتضخم</title>
    <meta name="description" content="افهم التكلفة الحقيقية لقروضك مع تتبع التضخم ورؤى الذكاء الاصطناعي">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="apple-touch-icon" href="icons/icon-512.png">

    <!-- Fonts - IBM Plex Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="spinner"></div>
            <p>جاري تحميل بياناتك المالية...</p>
        </div>

        <!-- Main App -->
        <div id="main-app" class="hidden">
            <!-- Navigation -->
            <nav class="nav-bar">
                <div class="nav-container">
                    <div class="nav-logo">
                        <svg width="32" height="32" viewBox="0 0 32 32">
                            <circle cx="16" cy="16" r="14" fill="url(#gradient1)" />
                            <path d="M16 8 L16 24 M10 16 L22 16" stroke="white" stroke-width="2" />
                            <defs>
                                <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#6366f1" />
                                    <stop offset="100%" style="stop-color:#8b5cf6" />
                                </linearGradient>
                            </defs>
                        </svg>
                        <span>المالية الذكية</span>
                    </div>
                    <div class="nav-links">
                        <button class="nav-link active" data-view="dashboard">الرئيسية</button>
                        <button class="nav-link" data-view="loans">القروض</button>
                        <button class="nav-link" data-view="insights">الملخص المالي</button>
                        <button class="nav-link" data-view="profile">الملف الشخصي</button>
                    </div>
                </div>
            </nav>

            <!-- Dashboard View -->
            <main id="dashboard-view" class="view active">
                <div class="container">
                    <header class="page-header">
                        <h1>لوحة القيادة المالية</h1>
                        <p class="subtitle">رؤى فورية مدعومة بالذكاء الاصطناعي</p>
                        <div class="last-update">
                            آخر تحديث: <span id="last-update-time">جاري التحميل...</span>
                        </div>
                    </header>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">التضخم الحالي</div>
                                <div class="stat-value" id="current-inflation">--%</div>
                                <div class="stat-change positive" id="inflation-change">جاري التحميل...</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path
                                        d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">إجمالي القروض</div>
                                <div class="stat-value" id="total-loans">0</div>
                                <div class="stat-change" id="loans-detail">لا توجد قروض نشطة</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path
                                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">خسارة القوة الشرائية</div>
                                <div class="stat-value" id="power-loss">--</div>
                                <div class="stat-change negative" id="power-loss-detail">مقارنة بالعام الماضي</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                                    <path
                                        d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">الدفعة القادمة</div>
                                <div class="stat-value" id="next-payment">--</div>
                                <div class="stat-change" id="next-payment-detail">لا توجد دفعات قادمة</div>
                            </div>
                        </div>
                    </div>

                    <!-- News Section -->
                    <section class="news-section">
                        <div class="container">
                            <header class="page-header">
                                <h1>قروضك</h1>
                                <button class="btn-primary" id="add-loan-btn">+ إضافة قرض جديد</button>
                            </header>
                            <div id="loans-container" class="loans-container">
                                <div class="empty-state">
                                    <svg width="64" height="64" fill="currentColor" viewBox="0 0 24 24">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                                    </svg>
                                    <h3>لا توجد قروض بعد</h3>
                                    <p>ابدأ بإضافة قرضك الأول لتتبع تكلفته الحقيقية</p>
                                </div>
                            </div>
                        </div>
            </main>

            <!-- AI Insights View -->
            <main id="insights-view" class="view">
                <div class="container">
                    <header class="page-header">
                        <h1>الملخص المالي</h1>
                        <p class="subtitle">مدعوم بنماذج ذكاء اصطناعي مجانية عبر OpenRouter</p>
                    </header>
                    <div id="full-insights-container" class="full-insights">
                        <div class="loading-placeholder">جاري تحميل الرؤى التفصيلية...</div>
                    </div>
                </div>
            </main>

            <!-- Profile View -->
            <main id="profile-view" class="view">
                <div class="container">
                    <header class="page-header">
                        <h1>الملف الشخصي والإعدادات</h1>
                    </header>
                    <div class="profile-container">
                        <div class="qr-section">
                            <h3>رمز QR الخاص بك</h3>
                            <p>امسح هذا الرمز على أجهزة أخرى للوصول إلى بياناتك</p>
                            <div id="qr-code" class="qr-code-container"></div>
                            <button class="btn-secondary" id="regenerate-qr">تحديث الرمز</button>
                        </div>

                        <div class="settings-section">
                            <h3>الإعدادات</h3>
                            <div class="form-group">
                                <label>الراتب الشهري</label>
                                <input type="number" id="salary-input" placeholder="أدخل راتبك الشهري">
                            </div>
                            <div class="form-group">
                                <label>الزيادة السنوية (%)</label>
                                <input type="number" id="raise-input" placeholder="نسبة الزيادة السنوية المتوقعة">
                            </div>
                            <div class="form-group">
                                <label>العملة</label>
                                <select id="currency-select">
                                    <option value="SAR">SAR - ريال سعودي</option>
                                    <option value="USD">USD - دولار أمريكي</option>
                                    <option value="EUR">EUR - يورو</option>
                                    <option value="AED">AED - درهم إماراتي</option>
                                    <option value="EGP">EGP - جنيه مصري</option>
                                </select>
                            </div>
                            <button class="btn-primary" id="save-settings">حفظ الإعدادات</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Loan Modal -->
    <div id="loan-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>إضافة قرض جديد</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>نوع القرض</label>
                    <select id="loan-type">
                        <option value="car">قرض سيارة</option>
                        <option value="rent">إيجار</option>
                        <option value="installment">تقسيط</option>
                        <option value="bnpl">اشتر الآن وادفع لاحقاً (Tabby/Tamara)</option>
                        <option value="custom">مخصص</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>مبلغ القرض</label>
                    <input type="number" id="loan-amount" placeholder="إجمالي مبلغ القرض">
                </div>
                <div class="form-group">
                    <label>معدل الفائدة (%)</label>
                    <input type="number" id="loan-interest" placeholder="معدل الفائدة السنوي">
                </div>
                <div class="form-group">
                    <label>المدة (بالأشهر)</label>
                    <input type="number" id="loan-duration" placeholder="مدة القرض بالأشهر">
                </div>
                <div class="form-group">
                    <label>القسط الشهري</label>
                    <input type="number" id="loan-payment" placeholder="قيمة القسط الشهري">
                </div>
                <div class="form-group">
                    <label>نسبة من الدخل</label>
                    <input type="number" id="loan-percentage" placeholder="نسبة القسط من راتبك">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">إلغاء</button>
                <button class="btn-primary" id="save-loan">حفظ القرض</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>